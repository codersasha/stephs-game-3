<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Warrior Cats The Game: Into the Wild - The Prophecy Begins</title>
  <meta name="description" content="Warrior Cats The Game: Into the Wild - The Prophecy Begins. A 3D adventure game based on the Warriors book series by Erin Hunter. Explore the forest as Fireheart, hunt, fight, and join ThunderClan!">
  <meta name="keywords" content="warrior cats, warrior cats the game, into the wild, the prophecy begins, warriors, erin hunter, thunderclan, fireheart, cat game, 3d cat game, browser game">
  <meta property="og:title" content="Warrior Cats The Game: Into the Wild - The Prophecy Begins">
  <meta property="og:description" content="A 3D adventure game based on the Warriors book series. Explore the forest, hunt, fight, and join ThunderClan!">
  <meta property="og:type" content="website">
  <link rel="stylesheet" href="css/style.css">
</head>
<body>

  <!-- Loading Screen -->
  <div id="loading-screen">
    <div class="loading-text">Loading the forest...</div>
    <div class="loading-bar">
      <div class="loading-bar-fill" id="loading-bar-fill"></div>
    </div>
  </div>

  <!-- Title Screen -->
  <div id="title-screen" class="hidden">
    <svg class="cat-silhouette" viewBox="0 0 200 160" xmlns="http://www.w3.org/2000/svg">
      <path d="M60 140 Q40 130 35 110 Q30 90 40 75 Q45 65 50 60 L55 40 L65 55 Q75 50 90 48 Q110 46 125 50 L135 55 L140 38 Q145 55 145 65 Q155 75 160 90 Q165 110 155 130 Q150 140 140 140 Z" fill="#ff8c00" stroke="#cc6600" stroke-width="2"/>
      <path d="M155 120 Q175 110 185 90 Q190 75 180 65" fill="none" stroke="#ff8c00" stroke-width="8" stroke-linecap="round"/>
      <circle cx="80" cy="70" r="6" fill="#44ff44"/><circle cx="115" cy="70" r="6" fill="#44ff44"/>
      <circle cx="80" cy="70" r="3" fill="#111"/><circle cx="115" cy="70" r="3" fill="#111"/>
      <path d="M95 82 L100 78 L105 82 Z" fill="#ff6699"/>
      <line x1="70" y1="80" x2="40" y2="75" stroke="#ddd" stroke-width="1"/>
      <line x1="70" y1="83" x2="38" y2="85" stroke="#ddd" stroke-width="1"/>
      <line x1="130" y1="80" x2="160" y2="75" stroke="#ddd" stroke-width="1"/>
      <line x1="130" y1="83" x2="162" y2="85" stroke="#ddd" stroke-width="1"/>
    </svg>
    <div class="title-game-label">WARRIOR CATS: THE GAME</div>
    <div class="title-main">Into the Wild</div>
    <div class="title-subtitle">The Prophecy Begins</div>
    <div class="start-prompt" id="start-button">Press any key or tap to start</div>
  </div>

  <!-- Save Slots Screen -->
  <div id="save-screen" class="hidden">
    <div class="save-screen-inner">
      <div class="save-title" id="save-screen-title">Choose a Save</div>
      <div class="save-slots" id="save-slots">
        <div class="save-slot" data-slot="1">
          <div class="save-slot-content" id="save-slot-1">
            <div class="save-slot-label">Save 1</div>
            <div class="save-slot-info">- Empty -</div>
          </div>
          <button class="save-delete-btn hidden" data-slot="1">&#10060;</button>
        </div>
        <div class="save-slot" data-slot="2">
          <div class="save-slot-content" id="save-slot-2">
            <div class="save-slot-label">Save 2</div>
            <div class="save-slot-info">- Empty -</div>
          </div>
          <button class="save-delete-btn hidden" data-slot="2">&#10060;</button>
        </div>
        <div class="save-slot" data-slot="3">
          <div class="save-slot-content" id="save-slot-3">
            <div class="save-slot-label">Save 3</div>
            <div class="save-slot-info">- Empty -</div>
          </div>
          <button class="save-delete-btn hidden" data-slot="3">&#10060;</button>
        </div>
      </div>
      <button class="save-back-btn hidden" id="save-back-btn">&#8592; Back to Game</button>
    </div>
  </div>

  <!-- Cutscene Overlay -->
  <div id="cutscene-overlay" class="hidden">
    <div class="letterbox" id="cutscene-letterbox-top"></div>
    <div id="cutscene-content">
      <div id="cutscene-speaker-icon"></div>
      <div id="cutscene-text"></div>
      <div id="cutscene-continue">tap to continue</div>
    </div>
    <div class="letterbox" id="cutscene-letterbox-bottom"></div>
  </div>

  <!-- Forest Choice Screen (Smudge & Princess warning) -->
  <div id="forest-choice-screen" class="hidden">
    <div class="choice-inner">
      <div class="choice-title">Enter the Forest?</div>
      <div class="choice-text" id="forest-choice-text">
        Smudge and Princess have warned you about the dangers...<br><br>
        <em>Do you still want to go into the forest?</em>
      </div>
      <div class="choice-buttons">
        <button class="choice-btn choice-yes" id="forest-yes-btn">Yes, I'm going!</button>
        <button class="choice-btn choice-no" id="forest-no-btn">No, I'll stay home</button>
      </div>
    </div>
  </div>

  <!-- Are You Sure Screen -->
  <div id="forest-confirm-screen" class="hidden">
    <div class="choice-inner">
      <div class="choice-title">Are you sure?</div>
      <div class="choice-text">
        The forest is calling to you... the wind, the trees, the adventure...<br>
        You've dreamed about this your whole life!<br><br>
        <em>Are you really sure you want to stay?</em>
      </div>
      <div class="choice-buttons">
        <button class="choice-btn choice-yes" id="confirm-go-forest">Actually, I'll go!</button>
        <button class="choice-btn choice-no" id="confirm-stay-home">I'm sure, I'll stay</button>
      </div>
    </div>
  </div>

  <!-- Name Picking Screen -->
  <div id="name-screen" class="hidden">
    <div class="name-screen-inner">
      <div class="name-title">Choose Your Warrior Name</div>
      <div class="name-story">
        Bluestar gazes down at you from Highrock.<br>
        <em>"You have shown courage by coming to the forest. Every clan cat receives a warrior name."</em>
      </div>
      <div class="name-hint">
        Your name should feel <span class="fiery-text">fiery</span> - like your bright orange pelt!<br>
        <small>Names like <strong>Fire</strong>, <strong>Flame</strong>, <strong>Ember</strong>, <strong>Blaze</strong> are great... but pick whatever you like!</small>
      </div>
      <div class="name-input-area">
        <input type="text" id="name-input" maxlength="12" placeholder="Type your name..." autocomplete="off" autocapitalize="words">
        <div class="name-preview">You will be known as: <span class="name-preview-text" id="name-preview-text">___paw</span></div>
      </div>
      <button class="name-submit-btn" id="name-submit-btn" disabled>Accept Name</button>
      <div class="name-error" id="name-error"></div>
    </div>
  </div>

  <!-- Next Chapter Button (top center, shown when story is ready to advance) -->
  <div id="next-chapter-btn" class="hidden">
    <span class="next-chapter-icon">&#128214;</span>
    <span class="next-chapter-label">Next Chapter</span>
    <span class="next-chapter-name" id="next-chapter-name"></span>
  </div>

  <!-- Game HUD -->
  <div id="game-hud">
    <div class="hud-left">
      <div class="hud-stat">
        <span class="hud-icon">&#10084;</span>
        <div class="hud-bar"><div class="hud-bar-fill health-fill" id="health-bar"></div></div>
      </div>
      <div class="hud-stat">
        <span class="hud-icon">&#9889;</span>
        <div class="hud-bar"><div class="hud-bar-fill energy-fill" id="energy-bar"></div></div>
      </div>
      <div class="hud-location" id="location-text">ThunderClan Camp</div>
    </div>
    <div class="hud-right">
      <div class="hud-stat" id="player-name">Firepaw</div>
      <div class="hud-buttons">
        <button class="hud-btn" id="hud-map-btn" title="Open Map">&#128506; Map</button>
        <button class="hud-btn" id="hud-save-btn" title="Save Game">&#128190; Save</button>
        <button class="hud-btn" id="hud-saves-btn" title="View Saves">&#128193; Saves</button>
      </div>
    </div>
    <div id="save-indicator" class="hidden">Saved!</div>
  </div>

  <!-- Mobile Controls -->
  <div id="mobile-controls">
    <div class="joystick-area" id="joystick-area">
      <div class="joystick-base"><div class="joystick-stick" id="joystick-stick"></div></div>
    </div>
    <div class="action-buttons">
      <button class="action-btn action-btn-sprint" id="btn-sprint">&#128007; RUN</button>
      <button class="action-btn action-btn-act" id="btn-action">&#128172; ACT</button>
      <button class="action-btn action-btn-jump" id="btn-jump">&#11014;&#65039; JUMP</button>
      <button class="action-btn action-btn-emote" id="btn-emote-toggle">&#128062;</button>
      <button class="action-btn action-btn-map" id="btn-map">&#128506; MAP</button>
    </div>
  </div>

  <!-- Emote Menu -->
  <div id="emote-bar" class="hidden">
    <button class="emote-btn" data-emote="happy" title="Happy">&#128578;</button>
    <button class="emote-btn" data-emote="sad" title="Sad">&#128546;</button>
    <button class="emote-btn" data-emote="angry" title="Angry">&#128544;</button>
    <button class="emote-btn" data-emote="nervous" title="Nervous">&#128552;</button>
    <button class="emote-btn" data-emote="sit" title="Sit Down">&#128049;</button>
    <button class="emote-btn" data-emote="sleep" title="Sleep">&#128564;</button>
  </div>

  <!-- Battle Screen -->
  <div id="battle-screen" class="hidden">
    <div class="battle-header" id="battle-header">BATTLE!</div>
    <!-- Enemy selector (shown when fighting a patrol with multiple cats) -->
    <div id="battle-enemy-selector" class="hidden">
      <div class="enemy-selector-title">Choose which cat to fight:</div>
      <div id="battle-enemy-list" class="enemy-selector-list"></div>
    </div>
    <div class="battle-arena">
      <div class="battle-side battle-player-side">
        <div class="battle-cat-label" id="battle-player-name">Firepaw</div>
        <canvas id="battle-player-canvas" width="200" height="200"></canvas>
        <div class="battle-hp-bar"><div class="battle-hp-fill battle-player-hp" id="battle-player-hp"></div></div>
        <div class="battle-hp-text" id="battle-player-hp-text">100/100</div>
      </div>
      <div class="battle-vs">VS</div>
      <div class="battle-side battle-enemy-side">
        <div class="battle-cat-label" id="battle-enemy-name">???</div>
        <canvas id="battle-enemy-canvas" width="200" height="200"></canvas>
        <div class="battle-hp-bar"><div class="battle-hp-fill battle-enemy-hp" id="battle-enemy-hp"></div></div>
        <div class="battle-hp-text" id="battle-enemy-hp-text">60/60</div>
      </div>
    </div>
    <div class="battle-log" id="battle-log"></div>
    <div class="battle-buttons" id="battle-buttons">
      <button class="battle-btn battle-attack-btn" id="battle-attack-btn">Attack</button>
      <button class="battle-btn battle-dodge-btn" id="battle-dodge-btn">Dodge</button>
      <button class="battle-btn battle-fierce-btn" id="battle-fierce-btn">Fierce Attack</button>
      <button class="battle-btn battle-surrender-btn" id="battle-surrender-btn">Surrender</button>
    </div>
  </div>

  <!-- Interaction Hint -->
  <div id="interact-hint" class="hidden">
    <span id="interact-hint-text">Press E to talk</span>
  </div>

  <!-- Swimming Indicator -->
  <div id="swim-indicator" class="hidden">&#127754; Swimming</div>

  <!-- Emote Bubble (shows above player when emoting) -->
  <div id="emote-bubble" class="hidden"></div>

  <!-- Den Interior -->
  <div id="den-interior" class="hidden">
    <div id="den-interior-header">
      <span id="den-interior-title">Warriors' Den</span>
      <button id="den-leave-btn">&#8592; Leave</button>
    </div>
    <div id="den-interior-desc">A warm, moss-lined den.</div>
    <div id="den-cat-grid"></div>
  </div>

  <!-- Map Overlay -->
  <div id="map-overlay" class="hidden">
    <div id="map-header">
      <span id="map-title">&#128506; Territory Map</span>
      <button id="map-close-btn">&times;</button>
    </div>
    <canvas id="map-canvas"></canvas>
    <div id="map-legend">
      <div class="legend-item"><span class="legend-dot" style="background:#ff8c00"></span> You</div>
      <div class="legend-item"><span class="legend-dot" style="background:#66bbff"></span> Clan Cat</div>
      <div class="legend-item"><span class="legend-dot" style="background:#ff4444"></span> Enemy Cat</div>
      <div class="legend-item"><span class="legend-dot legend-sq" style="background:#8a6a4a"></span> Prey</div>
      <div class="legend-item"><span class="legend-dot" style="background:#44aadd"></span> Water</div>
      <div class="legend-item"><span class="legend-dot legend-sq" style="background:#ffcc00"></span> Scent Marker</div>
    </div>
  </div>

  <!-- Message Box -->
  <div id="message-box">
    <div class="message-speaker" id="message-speaker"></div>
    <div class="message-text" id="message-text"></div>
    <div class="message-continue">Tap or press Space to continue</div>
  </div>

  <!-- Three.js from CDN (with fallback) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script>
    if (typeof THREE === 'undefined') {
      document.body.innerHTML = '<div style="color:#ff8c00;padding:40px;font-size:18px;background:#111;min-height:100vh;font-family:Georgia,serif">' +
        '<h1>Could not load the game</h1>' +
        '<p>Three.js failed to load. Please check your internet connection and refresh the page.</p>' +
        '<button onclick="location.reload()" style="padding:12px 24px;font-size:16px;cursor:pointer;background:#ff8c00;border:none;color:#111;border-radius:8px;margin-top:20px">Retry</button></div>';
    }
  </script>
  <script src="js/game-logic.js?v=32"></script>
  <script src="js/game.js?v=32"></script>

</body>
</html>
